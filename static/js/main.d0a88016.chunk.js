(this["webpackJsonpmy-app-ts-3"]=this["webpackJsonpmy-app-ts-3"]||[]).push([[0],{135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},149:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(50),c=a.n(i),o=(a(135),a(32)),s=a(33),l=a(17),h=a(43),u=a(42),d=(a(136),a(164)),v=a(163),b=a(162),j=a(150),p=(a(137),a(9)),g=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={value:"",warning:!1},n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.sendValueToParent=n.sendValueToParent.bind(Object(l.a)(n)),n.getWeather=n.getWeather.bind(Object(l.a)(n)),n}return Object(s.a)(a,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"sendValueToParent",value:function(e){e.preventDefault(),""===this.state.value.trim()||null!==this.state.value.match(/\d+/g)?this.setState({warning:!0}):(this.props.callBackFromParent(this.state.value),this.setState({warning:!1}))}},{key:"getWeather",value:function(e){this.props.callBackForGeoLocation()}},{key:"render",value:function(){var e=Object(p.jsx)(d.a,{error:!0,header:"There was an error",content:this.props.error}),t=Object(p.jsx)(d.a,{warning:!0,header:"Please check that you've entered a valid city"});return Object(p.jsxs)("div",{className:"SearchBar",children:[this.props.error&&e,this.state.warning&&t,Object(p.jsx)(v.a,{onSubmit:this.sendValueToParent,children:Object(p.jsx)(b.a,{className:"SearchBar-input",placeholder:"Search the weather in...",action:{icon:"search"},onChange:this.handleChange,value:this.state.value,size:"huge",type:"text",autoFocus:!0})}),Object(p.jsx)(j.a,{className:"ui icon button location-button",onClick:this.getWeather,children:Object(p.jsx)("i",{"aria-hidden":"true",className:"location arrow icon"})})]})}}]),a}(r.a.Component),m=(a(145),a(146),function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).saveDataToLocalStorage=n.saveDataToLocalStorage.bind(Object(l.a)(n)),n.deleteDataFromLocalStorage=n.deleteDataFromLocalStorage.bind(Object(l.a)(n)),n.downloadFile=n.downloadFile.bind(Object(l.a)(n)),n}return Object(s.a)(a,[{key:"deleteDataFromLocalStorage",value:function(){var e=JSON.parse(localStorage.getItem("cityList")||"{}"),t=e.indexOf(this.props.weatherData.city);e.splice(t,1),localStorage.setItem("cityList",JSON.stringify(e)),this.props.callBackFromParent(e)}},{key:"saveDataToLocalStorage",value:function(){var e=JSON.parse(localStorage.getItem("cityList")||"[]");e.push(this.props.weatherData.city),localStorage.setItem("cityList",JSON.stringify(e)),this.props.callBackFromParent(e)}},{key:"downloadFile",value:function(){for(var e=this.props.weatherData,t=(e.city,e.weather),a=e.country,n=e.temp,r=Math.round(n-273.15),i="".concat(a,", ").concat(r,"\xb0, ").concat(t[0].main),c=window.atob(window.btoa(i)),o=new ArrayBuffer(c.length),s=new Uint8Array(o),l=0;l<c.length;l++)s[l]=c.charCodeAt(l);var h=new Blob([s]);if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(h);else{var u=window.URL.createObjectURL(h),d=document.createElement("a");d.href=u,d.download="Weather Data.txt",d.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout((function(){window.URL.revokeObjectURL(u),d.remove()}),100)}}},{key:"render",value:function(){var e=this.props.weatherData,t=e.city,a=e.weather,n=e.country,r=e.temp,i=Math.round(r-273.15),c=Object(p.jsx)(j.a,{positive:!0,size:"mini",onClick:this.saveDataToLocalStorage,content:"Save to favorites"}),o=Object(p.jsx)(j.a,{negative:!0,size:"mini",onClick:this.deleteDataFromLocalStorage,content:"Delete from favorites"}),s=Object(p.jsx)(j.a,{positive:!0,size:"mini",onClick:this.downloadFile,content:"Save file"}),l=this.props.savedCities;return Object(p.jsxs)("div",{className:"WeatherCard",children:[Object(p.jsxs)("h1",{className:"WeatherCard-degrees",children:[i,"\xb0"]}),Object(p.jsxs)("div",{className:"WeatherCard-icon-container",children:[Object(p.jsx)("i",{className:"wi wi-owm-".concat(a[0].id," WeatherCard-icon")}),Object(p.jsx)("p",{children:a[0].main})]}),Object(p.jsxs)("h2",{className:"WeatherCard-city",children:[t,", ",n]}),l.includes(t)?o:c,s]})}}]),a}(r.a.Component)),f=(a(147),function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getWeather=n.getWeather.bind(Object(l.a)(n)),n}return Object(s.a)(a,[{key:"getWeather",value:function(e){this.props.callBackFromParent(e.target.value)}},{key:"render",value:function(){var e=this,t=this.props.savedCities.map((function(t){return Object(p.jsx)(j.a,{className:"Favorites-btn",size:"tiny",value:t,onClick:e.getWeather,content:t},"".concat(t,"-button"))}));return Object(p.jsxs)("div",{className:"Favorites",children:[Object(p.jsx)("h3",{className:"Favorites-title",children:"My favorite cities"}),Object(p.jsx)("div",{className:"Favorites-button-container",children:t})]})}}]),a}(r.a.Component)),O=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={weatherData:{weather:"",city:"",country:"",temp:0},searchDone:!1,savedCities:[],hasSavedCities:!1,errorMessage:""},n.callWeatherData=n.callWeatherData.bind(Object(l.a)(n)),n.updateSavedCities=n.updateSavedCities.bind(Object(l.a)(n)),n.getLocation=n.getLocation.bind(Object(l.a)(n)),n}return Object(s.a)(a,[{key:"getLocation",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){var a="https://api.openweathermap.org/data/2.5/weather?lat=".concat(t.coords.latitude,"&lon=").concat(t.coords.longitude,"&appid=034a228bf950af8c9eef368a69f8a99d&lang=en");fetch(a).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(t){var a={weather:t.weather,city:t.name,country:t.sys.country,temp:t.main.temp};e.setState({weatherData:a,searchDone:!0,errorMessage:""})})).catch((function(t){e.setState({errorMessage:t.message})}))}),(function(e){console.error("ERROR(".concat(e.code,"): ").concat(e.message))}),{timeout:6e3,enableHighAccuracy:!1})}},{key:"callWeatherData",value:function(e){var t=this,a="https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&APPID=034a228bf950af8c9eef368a69f8a99d");fetch(a).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(e){var a={weather:e.weather,city:e.name,country:e.sys.country,temp:e.main.temp};t.setState({weatherData:a,searchDone:!0,errorMessage:""}),console.log("data",e)})).catch((function(e){t.setState({errorMessage:e.message})}))}},{key:"updateSavedCities",value:function(e){var t=e.length>0;this.setState({savedCities:e,hasSavedCities:t})}},{key:"componentWillMount",value:function(){var e=JSON.parse(localStorage.getItem("cityList")||"[]");0!==e.length&&this.setState({hasSavedCities:!0,savedCities:e})}},{key:"render",value:function(){var e=this.state,t=e.searchDone,a=e.weatherData,n=e.hasSavedCities,r=e.savedCities,i=e.errorMessage;return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(g,{callBackFromParent:this.callWeatherData,callBackForGeoLocation:this.getLocation,error:i}),t&&Object(p.jsx)(m,{weatherData:a,savedCities:r,callBackFromParent:this.updateSavedCities}),n&&Object(p.jsx)(f,{savedCities:r,callBackFromParent:this.callWeatherData})]})}}]),a}(n.Component),w=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,166)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),i(e),c(e)}))};a(148);c.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(O,{})}),document.getElementById("root")),w()}},[[149,1,2]]]);
//# sourceMappingURL=main.d0a88016.chunk.js.map